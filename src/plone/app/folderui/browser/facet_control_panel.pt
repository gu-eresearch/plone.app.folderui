<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">
      
<!--<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />-->

<body>
<div id="content" metal:fill-slot="prefs_configlet_content">
    
<script type="text/javascript">
(function($) {
    
    $().ready(function() {
        $('a.facetEditLink').prepOverlay({
            subtype: 'ajax',
            filter: common_content_filter,
            formselector: 'form:has(div[id^=formfield-form-widgets-value])',
            closeselector: '[name=form.buttons.cancel]',
            noform: function(el) {
                var o = $(el);
                var emsg = o.find('dl.portalMessage.error');
                if (emsg.length) {
                    o.children().replaceWith(emsg);
                    return false;
                } else {
                    return 'reload';
            }}
        });
    });
    
})(jQuery);
</script>


    <a href=""
       id="setup-link"
       tal:attributes="href string:$portal_url/plone_control_panel"
       i18n:translate="">
       Site Setup
    </a> &rsaquo;

    <h1 class="documentFirstHeading" i18n:translate="heading_registry">Configuration Folder UI</h1>
    
    <p class="documentDescription" i18n:translate="description_registry">
        The list below shows all available facts currently configured.
    </p>
    
    <table id="recordsTable" class="listing">
        <thead>
            <tr>
                <th i18n:translate="heading_enabled">Enabled</th>
                <th i18n:translate="heading_order">Order</th>
                <th i18n:translate="heading_name">Name</th>
                <th i18n:translate="heading_description">Description</th>
                <th i18n:translate="heading_type">Type</th>
                <th i18n:translate="heading_value">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tal:loop repeat="facet view/getContent">
                <tr tal:define="oddrow repeat/facet/odd;"
                    tal:attributes="class python:oddrow and 'odd' or 'even'">
                    <td tal:content="facet/enabled"/>
                    <td tal:content="facet/order"/>
                    <td tal:content="facet/title" />
                    <td tal:content="facet/description" />
                    <td tal:content="facet/facet_type_title" />
                    <td>
                        <a class="facetEditLink"
                           tal:attributes="href string:${context/absolute_url}/folderui_control_edit/${facet/name}"
                           >Edit</a>
                        <a class="facetUpLink"
                           tal:attributes="href string:${context/absolute_url}/folderui_control_action/up/${facet/name}"
                           >Up</a>
                        <a class="facetDownLink"
                           tal:attributes="href string:${context/absolute_url}/folderui_control_action/down/${facet/name}"
                           >Down</a>
                        <a class="facetRemoveLink"

                     tal:attributes="href string:${context/absolute_url}/folderui_control_action/remove/${facet/name}"
                           >Remove</a>
                    </td>
                </tr>
            </tal:loop>
        </tbody>
        <tfooter>
            <tr>
               <td colspan="6">
                   <a class="facetEditLink"
                      tal:repeat="facet_type_term view/facet_types"
                      tal:attributes="href string:${context/absolute_url}/folderui_control_add/${facet_type_term/token}"
                      tal:content="string:Add ${facet_type_term/title}"
                      >Add Facet</a>
               </td>
            </tr>
        </tfooter>
    </table>

</div>
</body>
</html>
